<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<title>BINGO TV</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {
  background:#111;
  color:white;
  font-family:Arial;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:20px;
}
#number {
  width:260px;
  height:260px;
  border-radius:50%;
  background:white;
  color:black;
  font-size:120px;
  display:flex;
  align-items:center;
  justify-content:center;
  margin:20px;
}
button {
  padding:12px 20px;
  font-size:18px;
  margin:5px;
}
#winner {
  font-size:40px;
  color:#00ff88;
  margin-top:30px;
}
</style>
</head>
<body>

<h1>BINGO HALL</h1>
<div id="number">â€“</div>

<div>
  <button onclick="start()">START</button>
  <button onclick="stop()">STOP</button>
  <button onclick="reset()">RESET</button>
</div>

<div id="winner"></div>

<script>
let interval=null;

async function start(){
  await fetch("/api/start",{method:"POST"});
  if(interval) return;
  interval=setInterval(draw,5000);
}

async function stop(){
  clearInterval(interval);
  interval=null;
  await fetch("/api/stop",{method:"POST"});
}

async function reset(){
  location.reload();
  await fetch("/api/reset",{method:"POST"});
}

async function draw(){
  const res=await fetch("/api/draw");
  const data=await res.json();
  if(data.stopped) return;

  document.getElementById("number").innerText=data.number;

  const w=await fetch("/api/winner").then(r=>r.json());
  if(w.winner){
    clearInterval(interval);
    document.getElementById("winner").innerText=
      `ðŸŽ‰ BINGO! ${w.winner.name} (#${w.winner.id})`;
  }
}
</script>
</body>
</html>
