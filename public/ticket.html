<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>BINGO TICKET</title>

<style>
body{text-align:center;font-family:Arial}
.grid{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:10px;
  max-width:300px;
  margin:20px auto;
}
.cell{
  width:55px;height:55px;
  border-radius:50%;
  background:#eee;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
}
.marked{background:#ff5252;color:white}
button{padding:15px 25px;font-size:18px}
</style>
</head>

<body>

<h2 id="name"></h2>
<div class="grid" id="grid"></div>
<button onclick="bingo()">BINGO</button>

<script>
const id=new URLSearchParams(location.search).get("ticketId");

fetch("/api/ticket/"+id).then(r=>r.json()).then(t=>{
  document.getElementById("name").innerText=t.name;
  const g=document.getElementById("grid");
  t.nums.forEach(n=>{
    const d=document.createElement("div");
    d.className="cell";
    d.innerText=n;
    d.onclick=()=>d.classList.toggle("marked");
    g.appendChild(d);
  });
});

function bingo(){
  fetch("/api/bingo/"+id,{method:"POST"});
  alert("BINGO! ðŸŽ‰");
}
</script>

</body>
</html>
